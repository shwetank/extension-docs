---
layout: default-withsidebar
title: The browsingData API
copyright: opera-google-ccby
originalsource: http://developer.chrome.com/extensions/browsingData.html
---


<h2 id="manifest">Manifest</h2>
<p>
You must declare the <code>"browsingData"</code> permission in the <a href="manifest.html">extension manifest</a> to use the <a href="browsingdata.html">browsingData API</a>.
</p>

<pre class="prettyprint" data-filename="manifest.json">
{
  "name": "My extension",
  ...
  "permissions": [
    "browsingData",
  ],
  ...
}</pre>


<h2 id="usage">Usage</h2>
<p>
The simplest use-case for this API is a a time-based mechanism for clearing a user's browsing data. Your code should provide a timestamp which indicates the historical date after which the user's browsing data should be removed. This timestamp is formatted as the number of milliseconds since the Unix epoch (which can be retrieved from a JavaScript <code>Date</code> object via the <code>getTime</code> method).</p>
<p>
For example, to clear all of a user's browsing data from the last week, you might write code as follows:</p>
<pre class="prettyprint">
var callback = function () {
  // Do something clever here once data has been removed.
};

var millisecondsPerWeek = 1000 * 60 * 60 * 24 * 7;
var oneWeekAgo = (new Date()).getTime() - millisecondsPerWeek;
chrome.browsingData.remove({
  "since": oneWeekAgo
}, {
  "appcache": true,
  "cache": true,
  "cookies": true,
  "downloads": true,
  "fileSystems": true,
  "formData": true,
  "history": true,
  "indexedDB": true,
  "localStorage": true,
  "pluginData": true,
  "passwords": true,
  "webSQL": true
}, callback);</pre>
<p>The <code>chrome.browsingData.remove</code> method allows you to remove various types of browsing data with a single call, and will be much faster than calling multiple more specific methods. If, however, you only want to clear one specific type of browsing data (cookies, for example), the more granular methods offer a readable alternative to a call filled with JSON.</p>

<pre class="prettyprint">
var callback = function () {
  // Do something clever here once data has been removed.
};

var millisecondsPerWeek = 1000 * 60 * 60 * 24 * 7;
var oneWeekAgo = (new Date()).getTime() - millisecondsPerWeek;
chrome.browsingData.removeCookies({
  "since": oneWeekAgo
}, callback);
</pre>


<p class="note"><b>Important:</b> Removing browsing data involves a good deal of heavy lifting in the background, and can take tens of seconds to complete, depending on a user's profile. You should use the callback mechanism to keep your users up to date on the removal's status.</p>

<h2 id="origin-types">Origin Types</h2>

<p>Adding an <code>originTypes</code> property to the API's options object allows you to specify which types of origins ought to be effected. Currently, origins are divided into the following  categories:</p>

<ul>
<li><code>unprotectedWeb</code> covers the general case of websites that users visit without taking any special action. If you don't specify an <code>originTypes</code>, the API defaults to removing data from unprotected web origins.</li>
<li><code>extension</code> covers origins under the <code>chrome-extensions</code>: scheme. Removing extension data is, again, something you should be very careful about.</li>
</ul>

<p>We could adjust the previous example to remove only data from protected websites as follows:</p>

<pre class="prettyprint">
var callback = function () {
  // Do something clever here once data has been removed.
};

var millisecondsPerWeek = 1000 * 60 * 60 * 24 * 7;
var oneWeekAgo = (new Date()).getTime() - millisecondsPerWeek;
chrome.browsingData.remove({
  "since": oneWeekAgo,
  "originTypes": {
    "protectedWeb": true
  }
}, {
  "appcache": true,
  "cache": true,
  "cookies": true,
  "downloads": true,
  "fileSystems": true,
  "formData": true,
  "history": true,
  "indexedDB": true,
  "localStorage": true,
  "serverBoundCertificates": true,
  "pluginData": true,
  "passwords": true,
  "webSQL": true
}, callback);
</pre>


<p class="note"><b>Seriously:</b> Be careful with the origin types. These are potentially destructive operations that your users will write angry email about if they're not well-informed about what to expect when your extension removes data on their behalf.</p>


